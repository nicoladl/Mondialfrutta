<div class="layout-container">
  <main role="main">

    <div class="row wrapper">
      <div class="column large-full">
        <h3 class="title">Rete Logistica Nazionale</h3>
      </div>
    </div>

	<div class="map">
		<div id="map-logistica"></div>
		<!-- <div class="title">
			Rete Logistica<br>Nazionale
		</div> -->
	</div>

	<div class="row wrapper sr">
	  <div class="column small-full medium-half">
	    <p class="text text__header text__header--alone"></p>
	  </div>
	</div>

	<div class="tabs tabs--nopadding">
		<div class="row">
			<div class="tabs__title active column small-full medium-six large-six reset" data-item="nodi">
				<div class="title__tab">Nodi logistico-commerciali</div>
			</div>
			<div class="tabs__title column small-full medium-six large-six reset" data-item="porti">
				<div class="title__tab">Porti</div>
			</div>
		</div>

		<div class="tabs__item active" data-item="nodi">
			<div class="tabs__text text__tab">
				<div class="row">
					<div class="column small-six reset">
						<ul class="marker">
							<li>Avezzano</li>
							<li>Barletta (Andria)</li>
							<li>Bergamo</li>
							<li>Bologna</li>
							<li>Cagliari</li>
							<li>Cesena</li>
							<li>Cosenza</li>
							<li>Lucca (Capannoli)</li>
						</ul>
					</div>
					<div class="column small-six reset">
						<ul class="marker">
							<li>Milano</li>
							<li>Gorizia</li>
							<li>Roma</li>
							<li>Teramo (Martinsicuro)</li>
							<li>Torino</li>
							<li>Trapani</li>
							<li>Trento</li>
							<li>Treviso (Montebelluna)</li>
						</ul>
					</div>
				</div>
			</div>
		</div>
		<div class="tabs__item" data-item="porti">
			<div class="tabs__text text__tab">
				<div class="row">
					<div class="column small-six reset">
						<ul class="marker">
							<li>Ancona</li>
							<li>Bari</li>
							<li>Cagliari</li>
							<li>Catania</li>
							<li>Civitavecchia</li>
							<li>Genova</li>
							<li>Livorno</li>
							<li>Nizza</li>
						</ul>
					</div>
					<div class="column small-six reset">
						<ul class="marker">
							<li>Napoli</li>
							<li>Piombino</li>
							<li>Ravenna</li>
							<li>Salerno</li>
							<li>Savona</li>
							<li>Trieste</li>
							<li>Koper</li>
							<li>Venezia</li>
						</ul>
					</div>
				</div>
				</div>
			</div>
		</div>
	</div>
</div>

<script>
	function initMap() {
		var mondialfrutta = {lat: 45.7765148, lng: 12.0166059};
		var zoom;
		var center;

		if ($(window).width() > 1024) {
			zoom = 6;
			center = {lat: 42.2744398, lng: 5.2606315};
		} else {
			zoom = 5;
			center = {lat: 42.354104, lng: 13.083833};
		}


		var map = new google.maps.Map(document.getElementById('map-logistica'), {
			zoom: zoom,
			center: center,
			disableDefaultUI: true,
			scrollwheel: false,
			styles: [
			{
				"elementType": "geometry",
				"stylers": [
				{
					"color": "#f5f5f5"
				}
				]
			},
			{
				"elementType": "labels",
				"stylers": [
				{
					"visibility": "off"
				}
				]
			},
			{
				"elementType": "labels.icon",
				"stylers": [
				{
					"visibility": "off"
				}
				]
			},
			{
				"elementType": "labels.text.fill",
				"stylers": [
				{
					"color": "#616161"
				}
				]
			},
			{
				"elementType": "labels.text.stroke",
				"stylers": [
				{
					"color": "#f5f5f5"
				}
				]
			},
			{
				"featureType": "administrative",
				"elementType": "geometry",
				"stylers": [
				{
					"visibility": "off"
				}
				]
			},
			{
				"featureType": "administrative.land_parcel",
				"stylers": [
				{
					"visibility": "off"
				}
				]
			},
			{
				"featureType": "administrative.land_parcel",
				"elementType": "labels.text.fill",
				"stylers": [
				{
					"color": "#bdbdbd"
				}
				]
			},
			{
				"featureType": "administrative.neighborhood",
				"stylers": [
				{
					"visibility": "off"
				}
				]
			},
			{
				"featureType": "poi",
				"stylers": [
				{
					"visibility": "off"
				}
				]
			},
			{
				"featureType": "poi",
				"elementType": "geometry",
				"stylers": [
				{
					"color": "#eeeeee"
				}
				]
			},
			{
				"featureType": "poi",
				"elementType": "labels.text.fill",
				"stylers": [
				{
					"color": "#757575"
				}
				]
			},
			{
				"featureType": "poi.business",
				"stylers": [
				{
					"visibility": "off"
				}
				]
			},
			{
				"featureType": "poi.park",
				"elementType": "geometry",
				"stylers": [
				{
					"color": "#e5e5e5"
				}
				]
			},
			{
				"featureType": "poi.park",
				"elementType": "labels.text",
				"stylers": [
				{
					"visibility": "off"
				}
				]
			},
			{
				"featureType": "poi.park",
				"elementType": "labels.text.fill",
				"stylers": [
				{
					"color": "#9e9e9e"
				}
				]
			},
			{
				"featureType": "road",
				"stylers": [
				{
					"visibility": "off"
				}
				]
			},
			{
				"featureType": "road",
				"elementType": "geometry",
				"stylers": [
				{
					"color": "#ffffff"
				}
				]
			},
			{
				"featureType": "road",
				"elementType": "labels.icon",
				"stylers": [
				{
					"visibility": "off"
				}
				]
			},
			{
				"featureType": "road.arterial",
				"elementType": "labels",
				"stylers": [
				{
					"visibility": "off"
				}
				]
			},
			{
				"featureType": "road.arterial",
				"elementType": "labels.text.fill",
				"stylers": [
				{
					"color": "#757575"
				}
				]
			},
			{
				"featureType": "road.highway",
				"elementType": "geometry",
				"stylers": [
				{
					"color": "#dadada"
				}
				]
			},
			{
				"featureType": "road.highway",
				"elementType": "labels",
				"stylers": [
				{
					"visibility": "off"
				}
				]
			},
			{
				"featureType": "road.highway",
				"elementType": "labels.text.fill",
				"stylers": [
				{
					"color": "#616161"
				}
				]
			},
			{
				"featureType": "road.local",
				"stylers": [
				{
					"visibility": "off"
				}
				]
			},
			{
				"featureType": "road.local",
				"elementType": "labels.text.fill",
				"stylers": [
				{
					"color": "#9e9e9e"
				}
				]
			},
			{
				"featureType": "transit",
				"stylers": [
				{
					"visibility": "off"
				}
				]
			},
			{
				"featureType": "transit.line",
				"elementType": "geometry",
				"stylers": [
				{
					"color": "#e5e5e5"
				}
				]
			},
			{
				"featureType": "transit.station",
				"elementType": "geometry",
				"stylers": [
				{
					"color": "#eeeeee"
				}
				]
			},
			{
				"featureType": "water",
				"elementType": "geometry",
				"stylers": [
				{
					"color": "#c9c9c9"
				}
				]
			},
			{
				"featureType": "water",
				"elementType": "labels.text.fill",
				"stylers": [
				{
					"color": "#9e9e9e"
				}
				]
			}
			]
		});

		var markerGroups = {
		    'nodi': [
				['Treviso (Montebelluna)', 45.7765148, 12.0166059],
				['Gorizia', 45.9470174, 13.5745954],
				['Cesena', 44.14918,12.1924236],
				['Bologna', 44.4990968,11.2616457],
				['Bergamo', 45.693177,9.6320702],
				['Milano', 45.4627124,9.1076925],
				['Roma', 41.909986,12.3959142],
				['Cagliari', 39.2253991,9.0933586],
				['Torino', 45.0734673,7.6055668],
				['Lucca (Capannoli)', 43.8459636,10.4326106],
				['Teramo (Martinsicuro)', 42.8801396,13.8938082],
				['Barletta (Andria)', 41.3174926,16.2468983],
				['Cosenza', 39.3047949,16.2172893],
				['Trento', 46.0804401,11.050316],
				['Trapani', 38.0173969,12.503583],
				['Avezzano', 42.0331251, 13.4178086]
			],
		    'porti': [
		    	['Nizza', 43.7031691, 7.1827772,12],
				['Savona', 44.3345907, 8.3536207,12],
				['Genova', 44.4468921, 8.7507487],
				['Livorno', 43.5395285, 10.2552441,12],
				['Piombino', 42.9332714, 10.4908031,13],
				['Napoli', 40.8539123, 14.1765625],
				['Cagliari', 39.2253991, 9.0933586],
				['Ravenna', 44.4151569, 12.1630865,13],
				['Venezia', 45.462431, 12.2630756,13],
				['Catania', 37.4906905, 15.007478,12],
				['Trieste', 45.6522988, 13.7136222],
				['Civitavecchia', 42.088796, 11.765646],
				['Salerno', 40.4183026, 14.5571178],
				['Bari', 41.111356, 16.8120403],
				['Koper', 45.5405823, 13.7076453],
				['Ancona', 43.5821503, 13.4367866]
		    ]
		};

		var markers = [];
		var image = '{{ directory }}/images/marker-little.png';
		var imageHover = '';

		for (var i in markerGroups) {
			for (var j in markerGroups[i]) {
				var marker = new google.maps.Marker({
					position: new google.maps.LatLng(markerGroups[i][j][1], markerGroups[i][j][2]),
					map: map,
					icon: image,
					data: markerGroups[i][j][0]
				});
				google.maps.event.addListener(marker, 'mouseover', function() {
			    	// this.setIcon(imageHover);
		            if (!this.getMap()._infoWindow) {
		                this.getMap()._infoWindow = new google.maps.InfoWindow();
		            }
		            this.getMap()._infoWindow.close();
		            this.getMap()._infoWindow.setContent(this.data);
		            this.getMap()._infoWindow.open(this.getMap(), this);
				});
				google.maps.event.addListener(marker, 'mouseout', function() {
				    // this.setIcon(image);
		            this.getMap()._infoWindow.close();
				});
				markers.push(marker);
			}
		}

		var offset;
		if ($(window).width() > 1024) {
			offset = 0
		} else {
			offset = $('#map-logistica').offset().top
		}

		$('.marker li').click(function() {
			$('.marker li').removeClass('active');
			$(this).toggleClass('active');

			var data = $(this).html();

			for(var i = 0; i < markers.length; i++) {
				// markers[i].setIcon(image);

			    if (markers[i].data == data) {
			    	$('body, html').animate({scrollTop:offset}, '500');
			        google.maps.event.trigger(markers[i], 'mouseover');
			    }
			}

        });

	}
</script>


<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAF2UpwyHhDSoXHB8IunvpuckY46wNLM24&callback=initMap"></script>